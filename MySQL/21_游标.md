# 游标

## 创建游标

``` SQL
-- 游标仅局限于储存过程内，储存过程结束游标就消失了
CREATE PROCEDURE Func()
BEGIN
-- 为选择语句定义游标
DECLARE Cursor CURSOR
FOR
SELECT * FROM Table;
END;
```

## 开关游标

``` SQL
OPEN Cursor;
CLOSE Cursor;
```

## 释放游标

``` SQL
-- 释放游标
DEALLOCATE Cursor;
```

## 使用游标数据

``` SQL
-- 不做任何处理
CREATE PROCEDURE Func()
BEGIN
DECLARE C Type;
DECLARE Cursor CURSOR
FOR
SELECT Column FROM Table;
OPEN Cursor;
-- 获取游标的值
FETCH Cursor INTO C;
-- 显示结果
SELECT C;
CLOSE Cursor;
end;

-- 循环检索数据
CREATE PROCEDURE Func()
BEGIN
DECLARE C Type;
DECLARE Cursor CURSOR
FOR
SELECT Column FROM Table;
OPEN Cursor;
-- 循环
REPEAT
    FETCH Cursor INTO C;
    SELECT C;
UNTIL Expression END REPEAT;
/*
-- 亦可使用WHILE循环
WHILE Expression DO
END WHILE;
*/
CLOSE Cursor;
END;
```
