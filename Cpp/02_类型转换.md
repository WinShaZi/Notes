# 类型转换

1. static_cast

    ``` cpp
    // 常用于基本数据类型转换
    char c = '\0';
    // 返回将c转换成int类型
    static_cast<int>(c);

    // 当转换类时不安全，只有在有继承关系时才能转换，没有关系会报错
    class Base
    {
    };
    class Derive : public Base
    {
    };
    class Other
    {
    };

    Base *pb = new Base();
    Derive *pd = new Derive();
    Other *po = new Other();

    static_cast<Base *>(pd);     // Base *
    static_cast<Derive *>(pb);   // Derive，但不可这么使用
    static_cast<Base *>(po);     // 报错，Base和Other类之间毫无关系
    ```

2. const_cast

    ``` cpp
    // 只能改变底层const
    int i = 0;
    const int * cpi = &i;
    int * const pci = &i;

    const_cast<int *>(cpi);    // int *，未定义行为
    const_cast<int *>(pci);    // int *
    ```

3. dynamic_cast

    ``` cpp
    // 派生类可以转换到基类，基类不可以转换到派生类，除非基类是指向派生类的，且基类转换到派生类时，基类必须有虚函数
    class Base
    {
        virtual Func() { }
    };
    class Derive : public Base
    {
        virtual Func() { }
    };

    Base *pb = new Base();
    Derive *pd = new Derive();
    Base *pdb  = dynamic_cast<Base *>(new Derive());

    dynamic_cast<Base *>(pd);       // Base *
    dynamic_cast<Derive *>(pb);     // nullptr
    dynamic_cast<Derive *>(pdb);    // Derive *
    ```

4. reinterpret_cast

    ``` cpp
    // 在对象的位模式上提供较低层次上的重新解释，谨慎使用
    int i = 0;
    int *pi = &i;
    reinterpret_cast<char *>(pi);       // char *
    ```
